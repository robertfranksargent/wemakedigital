package com.wemakedigital.parallax.render {	import com.wemakedigital.parallax.cameras.ParallaxCamera;	import com.wemakedigital.parallax.objects.ParallaxObject;	import com.wemakedigital.parallax.scenes.ParallaxScene;	import com.wemakedigital.parallax.view.ParallaxViewport;		public class ParallaxRenderEngine 	{		protected var pipeline : ParallaxProjectionPipeline ;		protected var sorter : ParallaxRenderSorter ;		protected var data : ParallaxRenderData ;		public function ParallaxRenderEngine ( )		{			this.pipeline = new ParallaxProjectionPipeline( ) ;			this.sorter = new ParallaxRenderSorter( ) ;			this.data = new ParallaxRenderData( ) ;			this.data.renderer = this ;		}		public function renderScene ( scene : ParallaxScene , camera : ParallaxCamera , viewport : ParallaxViewport ) : void		{			this.data.camera = camera ;			this.data.scene = scene ;			this.data.viewport = viewport ;			this.data.renderObjects = scene.getChildren( ).concat( ) ;			this.pipeline.project( this.data ) ;			this.render( this.data ) ;		}				protected function render ( data : ParallaxRenderData ) : void		{			var renderList : Array = data.renderObjects.concat( ) ;			this.sorter.sort( renderList ) ;						for ( var i : uint = 0 , n : uint = renderList.length ; i < n ; i++ )			{				data.depth = i ;				( renderList[ i ] as ParallaxObject ).render( data ) ;			}		}	}}